(function(){"use strict";var e={5832:function(e,t,n){var o=n(5130),a=n(6768),i=n(4232);const r={id:"app"},l={class:"form-container"},s={class:"items-container"},d={class:"item-info"},c=["onUpdate:modelValue"],u=["onUpdate:modelValue"],p=["href","download","onClick"],m={class:"item-actions"},f=["onChange"],h=["onClick"],g=["onClick"],w={key:0,class:"error-message"};function v(e,t,n,v,y,b){return(0,a.uX)(),(0,a.CE)("div",r,[t[4]||(t[4]=(0,a.Lk)("h1",null,"My File Management System",-1)),(0,a.Lk)("div",l,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>y.newItem.name=e),placeholder:"name"},null,512),[[o.Jo,y.newItem.name]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>y.newItem.description=e),placeholder:"description"},null,512),[[o.Jo,y.newItem.description]]),(0,a.Lk)("input",{type:"file",onChange:t[2]||(t[2]=(...e)=>b.handleFileChange&&b.handleFileChange(...e)),ref:"fileInput",class:"file-input"},null,544),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>b.addItem&&b.addItem(...e))},"Upload")]),t[5]||(t[5]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",s,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(y.items,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id,class:"item"},[(0,a.Lk)("div",d,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>e.name=t},null,8,c),[[o.Jo,e.name]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>e.description=t},null,8,u),[[o.Jo,e.description]]),(0,a.Lk)("a",{href:b.getFileDownloadUrl(e.filepath),class:"download-link",download:e.originalName,onClick:(0,o.D$)((t=>b.downloadFile(e)),["prevent"])}," Download "+(0,i.v_)(e.originalName),9,p)]),(0,a.Lk)("div",m,[(0,a.Lk)("input",{type:"file",onChange:t=>b.handleUpdateFile(t,e),ref_for:!0,ref:"`updateFile_${item.id}`",class:"file-input"},null,40,f),(0,a.Lk)("button",{onClick:t=>b.updateItem(e)},"Update",8,h),(0,a.Lk)("button",{onClick:t=>b.deleteItem(e.id),class:"delete-btn"},"Delete",8,g)])])))),128))])]),y.errorMessage?((0,a.uX)(),(0,a.CE)("div",w,(0,i.v_)(y.errorMessage),1)):(0,a.Q3)("",!0)])}n(4603),n(7566),n(8721);var y=n(4373),b={name:"App",data(){return{items:[],newItem:{name:"",description:""},selectedFile:null,errorMessage:""}},methods:{handleFileChange(e){this.selectedFile=e.target.files[0]},handleUpdateFile(e,t){t.newFile=e.target.files[0]},getFileDownloadUrl(e){return`http://localhost:3002/media/${e.filepath}`},async fetchItems(){try{const e=await y.A.get("http://localhost:3002/items");this.items=e.data}catch(e){console.error("Error fetching items:",e),this.errorMessage="Failed to fetch items."}},async downloadFile(e){try{const t=await(0,y.A)({url:this.getFileDownloadUrl(e),method:"GET",responseType:"blob",timeout:3e4});if(!t.data||0===t.data.size)throw new Error("Invalid file data received");const n=new FileReader;n.onload=()=>{const n=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=n,o.setAttribute("download",e.originalName||"download"),document.body.appendChild(o),setTimeout((()=>{o.click(),setTimeout((()=>{document.body.removeChild(o),window.URL.revokeObjectURL(n)}),100)}),100)},n.readAsArrayBuffer(t.data)}catch(t){console.error("Download error:",t),404===t.response?.status?this.errorMessage="File not found. It may have been deleted or moved.":"ECONNABORTED"===t.code?this.errorMessage="Download timed out. Please try again.":this.errorMessage="Failed to download file. Please try again."}},async addItem(){try{if(!this.selectedFile)return void(this.errorMessage="Please select a file");const e=new FormData;e.append("name",this.newItem.name),e.append("description",this.newItem.description),e.append("file",this.selectedFile),console.log("Sending file:",this.selectedFile),console.log("Sending name:",this.newItem.name),console.log("Sending description:",this.newItem.description);const t=await y.A.post("http://localhost:3002/items",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("Upload response:",t.data),await this.fetchItems(),this.newItem.name="",this.newItem.description="",this.selectedFile=null,this.errorMessage="",this.$refs.fileInput&&(this.$refs.fileInput.value="")}catch(e){console.error("Error details:",e.response?.data||e.message),this.errorMessage=e.response?.data?.error||"Failed to add item. Please try again."}},async updateItem(e){try{const t=new FormData;t.append("name",e.name),t.append("description",e.description),e.newFile&&t.append("file",e.newFile),await y.A.put(`http://localhost:3002/items/${e.id}`,t,{headers:{"Content-Type":"multipart/form-data"}}),await this.fetchItems(),e.newFile=null;const n=this.$refs[`updateFile_${e.id}`];n&&(n.value="")}catch(t){console.error("Error updating item:",t),this.errorMessage="Failed to update item. Please try again."}},async deleteItem(e){try{await y.A.delete(`http://localhost:3002/items/${e}`),await this.fetchItems()}catch(t){console.error("Error deleting item:",t),this.errorMessage="Failed to delete item. Please try again."}}},created(){this.fetchItems()}},k=n(1241);const F=(0,k.A)(b,[["render",v],["__scopeId","data-v-225afea5"]]);var I=F;(0,o.Ef)(I).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,i){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],i=e[c][2];for(var l=!0,s=0;s<o.length;s++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(l=!1,i<r&&(r=i));if(l){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,r=o[0],l=o[1],s=o[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var c=s(n)}for(t&&t(o);d<r.length;d++)i=r[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},o=self["webpackChunkfms_app"]=self["webpackChunkfms_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(5832)}));o=n.O(o)})();
//# sourceMappingURL=app.ac1924fe.js.map